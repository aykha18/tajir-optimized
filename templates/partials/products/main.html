      <!-- UNIFIED PRODUCTS SECTION -->
      <section id="productsSec" class="page hidden space-y-6">

        <!-- Tab Navigation -->
        <div class="flex border-b border-neutral-700 mb-6">
          <button id="productTypesTab"
            class="px-4 py-2 text-sm font-medium text-neutral-400 border-b-2 border-transparent hover:text-neutral-300 hover:border-neutral-600 transition-all duration-200 active"
            onclick="switchProductTab('types')">
            Product Types
          </button>
          <button id="productsTab"
            class="px-4 py-2 text-sm font-medium text-neutral-400 border-b-2 border-transparent hover:text-neutral-300 hover:border-neutral-600 transition-all duration-200"
            onclick="switchProductTab('products')">
            Products
          </button>
        </div>

        <!-- Product Types Tab Content -->
        <div id="productTypesContent" class="space-y-6">
          <!-- Loading Overlay -->
          <div id="productTypeLoadingOverlay"
            class="fixed inset-0 bg-black/50 backdrop-blur-sm z-40 flex items-center justify-center hidden">
            <div class="bg-neutral-900/95 border border-neutral-700 rounded-xl p-8 flex flex-col items-center">
              <div class="relative mb-4">
                <div class="w-12 h-12 border-4 border-neutral-700 border-t-indigo-500 rounded-full animate-spin"></div>
                <div
                  class="absolute inset-0 w-12 h-12 border-4 border-transparent border-t-indigo-400 rounded-full animate-ping opacity-20">
                </div>
              </div>
              <p class="text-white font-medium">Loading Product Types...</p>
            </div>
          </div>

          <form id="productTypeForm"
            class="grid grid-cols-12 gap-4 transform transition-all duration-300 opacity-0 translate-y-4">
            <div class="col-span-4 flex flex-col">
              <label for="productTypeName" class="text-sm font-medium text-neutral-300 mb-1">Type Name</label>
              <input id="productTypeName" placeholder="e.g. Shirt" required
                class="bg-neutral-900/70 border border-neutral-700 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-400/60 transition-all duration-200 hover:border-neutral-600 focus:border-indigo-500">
            </div>
            <div class="col-span-5 flex flex-col">
              <label for="productTypeDescription" class="text-sm font-medium text-neutral-300 mb-1">Description
                (Optional)</label>
              <input id="productTypeDescription" placeholder="e.g. All types of shirts and tops"
                class="bg-neutral-900/70 border border-neutral-700 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-400/60 transition-all duration-200 hover:border-neutral-600 focus:border-indigo-500">
            </div>
            <button type="submit"
              class="col-span-3 bg-indigo-600 hover:bg-indigo-500 active:scale-95 transition-all duration-200 rounded-lg text-sm font-medium py-2 self-end transform hover:scale-105 hover:shadow-lg hover:shadow-indigo-500/25 flex items-center justify-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6">
                </path>
              </svg>
              Add/Update
            </button>
          </form>

          <!-- Skeleton Loading -->
          <div id="productTypeSkeleton" class="border border-neutral-700 rounded-lg overflow-hidden hidden">
            <div class="animate-pulse">
              <div class="bg-neutral-800/50 h-12 flex items-center px-3">
                <div class="h-4 bg-neutral-700 rounded w-1/3"></div>
              </div>
              <div class="bg-neutral-800/30 h-12 flex items-center px-3">
                <div class="h-4 bg-neutral-700 rounded w-1/4"></div>
              </div>
              <div class="bg-neutral-800/50 h-12 flex items-center px-3">
                <div class="h-4 bg-neutral-700 rounded w-1/2"></div>
              </div>
              <div class="bg-neutral-800/30 h-12 flex items-center px-3">
                <div class="h-4 bg-neutral-700 rounded w-2/5"></div>
              </div>
            </div>
          </div>

          <ul id="productTypeList"
            class="text-sm divide-y divide-neutral-800 border border-neutral-700 rounded-lg overflow-hidden transform transition-all duration-300 opacity-0 translate-y-4"
            aria-live="polite"></ul>
        </div>

        <!-- Products Tab Content -->
        <div id="productsContent" class="space-y-6 hidden">


          <!-- Loading Overlay -->
          <div id="productLoadingOverlay"
            class="fixed inset-0 bg-black/50 backdrop-blur-sm z-40 flex items-center justify-center hidden">
            <div class="bg-neutral-900/95 border border-neutral-700 rounded-xl p-8 flex flex-col items-center">
              <div class="relative mb-4">
                <div class="w-12 h-12 border-4 border-neutral-700 border-t-indigo-500 rounded-full animate-spin"></div>
                <div
                  class="absolute inset-0 w-12 h-12 border-4 border-transparent border-t-indigo-400 rounded-full animate-ping opacity-20">
                </div>
              </div>
              <p class="text-white font-medium">Loading Products...</p>
            </div>
          </div>

          <div class="flex items-center gap-4 mb-4">
            <input type="text" id="productSearch" placeholder="Search products by name or type..."
              class="bg-neutral-900/70 border border-neutral-700 text-white rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-400/60 transition-all duration-200 hover:border-neutral-600 focus:border-indigo-500 flex-1 max-w-md">
            <button
              onclick="if(window.catalogScanner) { window.catalogScanner.showModal(); } else { console.error('Catalog Scanner not available'); showModernAlert('Catalog Scanner is loading, please try again in a moment.', 'warning'); }"
              class="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-green-500/25 flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              Upload Products
            </button>
            <button
              onclick="if(window.ocrScanner) { window.ocrScanner.showModal(); } else { console.error('OCR Scanner not available'); showModernAlert('OCR Scanner is loading, please try again in a moment.', 'warning'); }"
              class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25 flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                </path>
              </svg>
              Scan Products
            </button>
          </div>
          <div id="productResults"></div>

          <form id="productForm"
            class="grid grid-cols-12 gap-4 transform transition-all duration-300 opacity-0 translate-y-4">
            <div class="col-span-3 flex flex-col">
              <label for="productTypeSelect" class="text-sm font-medium text-neutral-300 mb-1">Product Type</label>
              <select id="productTypeSelect" required
                class="bg-neutral-900/70 border border-neutral-700 rounded-lg px-2 py-2 text-sm focus:ring-2 focus:ring-indigo-400/60 transition-all duration-200 hover:border-neutral-600 focus:border-indigo-500">
                <option hidden selected>Select type</option>
              </select>
            </div>
            <div class="col-span-5 flex flex-col">
              <label for="productName" class="text-sm font-medium text-neutral-300 mb-1">Product Name</label>
              <input id="productName" placeholder="e.g. Linen Shirt" required
                class="bg-neutral-900/70 border border-neutral-700 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-400/60 transition-all duration-200 hover:border-neutral-600 focus:border-indigo-500">
            </div>
            <div class="col-span-2 flex flex-col">
              <label for="productPrice" class="text-sm font-medium text-neutral-300 mb-1">Price (AED)</label>
              <input id="productPrice" type="number" min="0" step=".01" placeholder="0.00" required
                class="bg-neutral-900/70 border border-neutral-700 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-400/60 transition-all duration-200 hover:border-neutral-600 focus:border-indigo-500">
            </div>
            <div class="col-span-3 flex flex-col">
              <label for="productBarcode" class="text-sm font-medium text-neutral-300 mb-1">Barcode</label>
              <div class="flex gap-2">
                <input id="productBarcode" placeholder="Scan or enter barcode"
                  class="flex-1 bg-neutral-900/70 border border-neutral-700 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-400/60 transition-all duration-200 hover:border-neutral-600 focus:border-indigo-500">
                <button type="button" id="openBarcodeScannerBtn"
                  class="bg-green-600 hover:bg-green-500 text-white px-3 rounded-lg text-sm">Scan</button>
              </div>
            </div>
            <button type="submit"
              class="col-span-2 bg-indigo-600 hover:bg-indigo-500 active:scale-95 transition-all duration-200 rounded-lg text-sm font-medium py-2 self-end transform hover:scale-105 hover:shadow-lg hover:shadow-indigo-500/25 flex items-center justify-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6">
                </path>
              </svg>
              Add/Update
            </button>
          </form>

          <!-- Skeleton Loading -->
          <div id="productSkeleton" class="border border-neutral-700 rounded-lg overflow-hidden hidden">
            <div class="animate-pulse">
              <div class="bg-neutral-800/50 h-12 flex items-center px-3">
                <div class="h-4 bg-neutral-700 rounded w-1/4"></div>
                <div class="h-4 bg-neutral-700 rounded w-1/3 ml-4"></div>
                <div class="h-4 bg-neutral-700 rounded w-1/6 ml-4"></div>
                <div class="h-4 bg-neutral-700 rounded w-1/5 ml-auto"></div>
              </div>
              <div class="bg-neutral-800/30 h-12 flex items-center px-3">
                <div class="h-4 bg-neutral-700 rounded w-1/3"></div>
                <div class="h-4 bg-neutral-700 rounded w-1/4 ml-4"></div>
                <div class="h-4 bg-neutral-700 rounded w-1/5 ml-4"></div>
                <div class="h-4 bg-neutral-700 rounded w-1/6 ml-auto"></div>
              </div>
            </div>
          </div>

          <ul id="productList"
            class="text-sm divide-y divide-neutral-800 border border-neutral-700 rounded-lg overflow-hidden transform transition-all duration-300 opacity-0 translate-y-4"
            aria-live="polite"></ul>

          <table id="productTable"
            class="min-w-full text-sm border border-neutral-700 rounded-lg overflow-hidden transform transition-all duration-300 opacity-0 translate-y-4"
            dir="{{ 'rtl' if get_user_language() == 'ar' else 'ltr' }}">
            <thead class="bg-neutral-800/70">
              <tr>
                <th class="px-3 py-2 font-medium {{ 'text-right' if get_user_language() == 'ar' else 'text-left' }}">
                  Type</th>
                <th class="px-3 py-2 font-medium {{ 'text-right' if get_user_language() == 'ar' else 'text-left' }}">
                  Name</th>
                <th class="px-3 py-2 font-medium {{ 'text-right' if get_user_language() == 'ar' else 'text-left' }}">
                  Price</th>
                <th class="px-3 py-2 font-medium {{ 'text-right' if get_user_language() == 'ar' else 'text-left' }}">
                  Actions</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-neutral-800"></tbody>
          </table>
        </div>
      </section>
