{
  "timestamp": "2025-08-29T00:25:15.924086",
  "migration_log": [
    {
      "timestamp": "2025-08-29T00:25:13.271621",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN tier_level TEXT",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.336393",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN points_threshold INTEGER",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.400385",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN is_active BOOLEAN DEFAULT TRUE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.463364",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN color_code TEXT",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.529172",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN discount_percent REAL",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.609663",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN bonus_points_multiplier REAL",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.674047",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN exclusive_offers BOOLEAN DEFAULT FALSE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.742768",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN free_delivery BOOLEAN DEFAULT FALSE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.814458",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_tiers ADD COLUMN priority_service BOOLEAN DEFAULT FALSE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:13.878990",
      "step": "Data migration",
      "query": "UPDATE loyalty_tiers SET tier_level = tier_name, ...",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.073183",
      "step": "Add column",
      "query": "ALTER TABLE customer_loyalty ADD COLUMN tier_level TEXT",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.137456",
      "step": "Add column",
      "query": "ALTER TABLE customer_loyalty ADD COLUMN available_points INTEGER",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.205107",
      "step": "Add column",
      "query": "ALTER TABLE customer_loyalty ADD COLUMN lifetime_points INTEGER DEFAULT 0",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.270640",
      "step": "Add column",
      "query": "ALTER TABLE customer_loyalty ADD COLUMN tier_points_threshold INTEGER",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.332758",
      "step": "Add column",
      "query": "ALTER TABLE customer_loyalty ADD COLUMN birthday DATE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.398300",
      "step": "Add column",
      "query": "ALTER TABLE customer_loyalty ADD COLUMN anniversary_date DATE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.461187",
      "step": "Add column",
      "query": "ALTER TABLE customer_loyalty ADD COLUMN join_date DATE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.524750",
      "step": "Data migration",
      "query": "UPDATE customer_loyalty SET tier_level = ...",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.719105",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_transactions ADD COLUMN points_amount INTEGER",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.782561",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_transactions ADD COLUMN loyalty_id INTEGER",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.849631",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_transactions ADD COLUMN aed_amount REAL",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.913090",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_transactions ADD COLUMN expiry_date DATE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:14.975388",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_transactions ADD COLUMN is_active BOOLEAN DEFAULT TRUE",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:15.041428",
      "step": "Data migration",
      "query": "UPDATE loyalty_transactions SET points_amount = ...",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:15.243049",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_rewards ADD COLUMN points_cost INTEGER",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:15.306651",
      "step": "Add column",
      "query": "ALTER TABLE loyalty_rewards ADD COLUMN discount_percent REAL",
      "success": true,
      "error": null
    },
    {
      "timestamp": "2025-08-29T00:25:15.381275",
      "step": "Data migration",
      "query": "UPDATE loyalty_rewards SET points_cost = ...",
      "success": true,
      "error": null
    }
  ],
  "backup_tables": [],
  "rollback_queries": [
    "DROP TABLE IF EXISTS loyalty_tiers_backup",
    "DROP TABLE IF EXISTS customer_loyalty_backup",
    "DROP TABLE IF EXISTS loyalty_transactions_backup",
    "DROP TABLE IF EXISTS loyalty_rewards_backup"
  ]
}