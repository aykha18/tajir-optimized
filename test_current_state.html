<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Current State - Tajir POS</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #1f2937; 
            color: white; 
            line-height: 1.6;
        }
        .test-section { 
            margin: 20px 0; 
            padding: 20px; 
            border: 1px solid #374151; 
            border-radius: 8px; 
        }
        .visible { background: #10b981; }
        .hidden { background: #ef4444; }
        .commented { background: #6b7280; }
        .warning { background: #f59e0b; }
        .error { background: #dc2626; }
        .success { background: #059669; }
        .code { 
            background: #111827; 
            padding: 10px; 
            border-radius: 4px; 
            font-family: monospace; 
            margin: 10px 0;
            overflow-x: auto;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #2563eb; }
        .result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .result.pass { background: #065f46; border: 1px solid #10b981; }
        .result.fail { background: #7f1d1d; border: 1px solid #ef4444; }
    </style>
</head>
<body>
    <h1>üîç Tajir POS - Element Visibility Test</h1>
    
    <div class="test-section visible">
        <h2>‚úÖ Test Instructions</h2>
        <p>This page will help diagnose why commented elements are still visible.</p>
        <ol>
            <li>Click "Run Full Test" below</li>
            <li>Check the console for detailed results</li>
            <li>Look for any error messages</li>
        </ol>
    </div>

    <div class="test-section commented">
        <h2>üîç Test Controls</h2>
        <button onclick="runFullTest()">Run Full Test</button>
        <button onclick="checkSpecificElements()">Check Specific Elements</button>
        <button onclick="clearResults()">Clear Results</button>
    </div>

    <div id="testResults" class="test-section">
        <h2>üìä Test Results</h2>
        <p>Click a test button above to see results here.</p>
    </div>

    <div class="test-section warning">
        <h2>‚ö†Ô∏è Expected Behavior</h2>
        <p>The following elements should NOT be visible in the main app:</p>
        <ul>
            <li>"Update Settings" button</li>
            <li>"Change Password" button</li>
            <li>"Current Settings Display Card"</li>
        </ul>
        <p>If they are visible, there's a JavaScript or caching issue.</p>
    </div>

    <div class="test-section">
        <h2>üîß Troubleshooting Steps</h2>
        <ol>
            <li><strong>Hard Refresh:</strong> Ctrl+F5 (Windows) or Cmd+Shift+R (Mac)</li>
            <li><strong>Clear Cache:</strong> Open DevTools ‚Üí Application ‚Üí Storage ‚Üí Clear</li>
            <li><strong>Check Console:</strong> Look for JavaScript errors</li>
            <li><strong>Check Network:</strong> Ensure new JS files are loaded</li>
        </ol>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const results = document.getElementById('testResults');
            const resultDiv = document.createElement('div');
            resultDiv.className = `result ${type}`;
            resultDiv.innerHTML = message;
            results.appendChild(resultDiv);
        }

        function clearResults() {
            const results = document.getElementById('testResults');
            results.innerHTML = '<h2>üìä Test Results</h2><p>Results cleared.</p>';
        }

        function checkSpecificElements() {
            clearResults();
            addResult('<strong>üîç Checking Specific Elements...</strong>', 'info');
            
            // Check for commented elements
            const updateSettingsBtn = document.querySelector('button:contains("Update Settings")');
            const changePasswordBtn = document.getElementById('openChangePassword');
            const settingsDisplay = document.getElementById('shopSettingsDisplay');
            
            if (updateSettingsBtn) {
                addResult('‚ùå FAILED: "Update Settings" button found in DOM', 'fail');
            } else {
                addResult('‚úÖ PASSED: "Update Settings" button not found in DOM', 'pass');
            }
            
            if (changePasswordBtn) {
                addResult('‚ùå FAILED: "Change Password" button found in DOM', 'fail');
            } else {
                addResult('‚úÖ PASSED: "Change Password" button not found in DOM', 'pass');
            }
            
            if (settingsDisplay) {
                addResult('‚ùå FAILED: "Current Settings Display" found in DOM', 'fail');
            } else {
                addResult('‚úÖ PASSED: "Current Settings Display" not found in DOM', 'pass');
            }
        }

        function runFullTest() {
            clearResults();
            addResult('<strong>üöÄ Running Full Test...</strong>', 'info');
            
            console.log('=== TAJIR POS ELEMENT VISIBILITY TEST ===');
            
            // Test 1: Check if commented elements exist in DOM
            addResult('üîç Test 1: Checking DOM for commented elements...', 'info');
            
            const commentedElements = [
                { name: 'Update Settings button', selector: 'button:contains("Update Settings")' },
                { name: 'Change Password button', selector: '#openChangePassword' },
                { name: 'Current Settings Display', selector: '#shopSettingsDisplay' }
            ];
            
            let allPassed = true;
            
            commentedElements.forEach(element => {
                let found = false;
                
                if (element.selector.includes(':contains')) {
                    // Check for text content
                    const buttons = document.querySelectorAll('button');
                    buttons.forEach(btn => {
                        if (btn.textContent.includes('Update Settings')) {
                            found = true;
                        }
                    });
                } else {
                    found = document.querySelector(element.selector) !== null;
                }
                
                if (found) {
                    addResult(`‚ùå FAILED: ${element.name} found in DOM`, 'fail');
                    allPassed = false;
                    console.error(`‚ùå ${element.name} found in DOM`);
                } else {
                    addResult(`‚úÖ PASSED: ${element.name} not found in DOM`, 'pass');
                    console.log(`‚úÖ ${element.name} not found in DOM`);
                }
            });
            
            // Test 2: Check JavaScript errors
            addResult('üîç Test 2: Checking for JavaScript errors...', 'info');
            
            // Test 3: Check computed styles
            addResult('üîç Test 3: Checking element visibility...', 'info');
            
            // Test 4: Summary
            if (allPassed) {
                addResult('üéâ ALL TESTS PASSED! Commented elements are properly hidden.', 'success');
                console.log('üéâ ALL TESTS PASSED! Commented elements are properly hidden.');
            } else {
                addResult('‚ùå SOME TESTS FAILED! Check console for details.', 'fail');
                console.log('‚ùå SOME TESTS FAILED! Check console for details.');
            }
            
            console.log('=== TEST COMPLETE ===');
        }

        // Auto-run test when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                addResult('üöÄ Page loaded. Ready to run tests.', 'info');
            }, 1000);
        });
    </script>
</body>
</html>
